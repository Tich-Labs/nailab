<div class="min-h-screen bg-gray-50">
  <% content_for :title, "#{@program.title} â€” Nailab" if defined?(@program) %>
  <% content_for :meta_description, (@program.short_summary.presence || strip_tags(@program.description.to_s).truncate(160)) if defined?(@program) %>
  <%# JSON-LD Program schema for SEO %>
  <% content_for :head do %>
    <script type="application/ld+json">
      <%= raw({
        "@context" => "https://schema.org",
        "@type" => "Course",
        "name" => @program.title,
        "description" => (@program.short_summary.presence || strip_tags(@program.description.to_s).truncate(300)),
        "url" => program_detail_url(@program.slug),
        "startDate" => @program.start_date&.iso8601,
        "endDate" => @program.end_date&.iso8601,
        "image" => @program.primary_image_url
      }.to_json) %>
    </script>
  <% end %>
  <%= render 'pages/program_detail/hero' %>
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="bg-white rounded-2xl shadow-lg p-8 lg:p-12">
      <div class="mb-8">
        <div class="mb-2">
          <span class="inline-block px-3 py-1 bg-gray-100 text-nailab-teal text-xs font-semibold rounded-full">
            <%= (@program.categories.first&.name.presence) || @program.program_type&.titleize || 'Uncategorized' %>
          </span>
        </div>
        <p class="text-xl text-gray-600 mb-4 leading-relaxed">
          <%= @program.short_summary %>
        </p>
        <div class="prose prose-lg max-w-none text-gray-800">
          <% if @program.description.respond_to?(:body) && @program.description.body.present? %>
            <%= @program.description.body.to_trix_html %>
          <% else %>
            <%= sanitize(@program.description.to_s) %>
          <% end %>
        </div>
        <div class="mt-6">
          <strong>Type:</strong> <%= @program.program_type&.humanize %><br>
          <strong>Status:</strong> <%= @program.status&.humanize %><br>
          <% if @program.start_date.present? %>
            <strong>Start Date:</strong> <%= @program.start_date.strftime('%b %d, %Y') %><br>
          <% end %>
          <% if @program.end_date.present? %>
            <strong>End Date:</strong> <%= @program.end_date.strftime('%b %d, %Y') %><br>
          <% end %>
        </div>
      </div>
      <%= render 'pages/program_detail/cta' %>
    </div>
  </div>
</div>