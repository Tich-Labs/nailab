<%# app/views/mentor_onboarding/steps/_availability.html.erb %>
<div class="p-8">
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-900 mb-2">Availability & Pricing</h2>
    <p class="text-gray-600">Set your availability and session preferences</p>
  </div>
  <%= form_with model: @profile, url: mentor_onboarding_path(step: 'availability'), method: :put, id: 'mentor-onboarding-form', class: 'space-y-6' do |f| %>
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= hidden_field_tag :save_and_exit, '', id: 'save-and-exit-field' %>
    <div>
      <%= f.label :availability_hours_month, 'Hours per month available', class: 'block text-sm font-medium text-slate-600 mb-4' %>
      <div class="space-y-3">
        <% hours_options = [
          ['Up to 2 hours/week', 2],
          ['3–5 hours/month', 4],
          ['6–10 hours/month', 8],
          ['10+ hours/month', 12],
          ['Flexible', 0]
        ] %>
        <% hours_options.each do |label, value| %>
          <label class="flex items-center space-x-2 p-3 border border-slate-200 rounded-2xl hover:bg-slate-50 cursor-pointer">
            <%= f.radio_button :availability_hours_month, value, class: 'border-slate-300 text-purple-600 focus:ring-purple-500' %>
            <span class="text-sm"><%= label %></span>
          </label>
        <% end %>
      </div>
      <% if @profile.errors[:availability_hours_month].any? %>
        <p class="mt-2 text-sm text-red-600"><%= @profile.errors[:availability_hours_month].first %></p>
      <% end %>
    </div>
    <div>
      <%= f.label :preferred_mentorship_mode, 'Preferred mentorship mode', class: 'block text-sm font-medium text-slate-600 mb-4' %>
      <div class="space-y-3">
        <% modes = ['Virtual', 'In-person (where available)', 'Both', 'Other'] %>
        <% modes.each do |mode| %>
          <label class="flex items-center space-x-2 p-3 border border-slate-200 rounded-2xl hover:bg-slate-50 cursor-pointer">
            <%= f.radio_button :preferred_mentorship_mode, mode, class: 'border-slate-300 text-purple-600 focus:ring-purple-500' %>
            <span class="text-sm"><%= mode %></span>
          </label>
        <% end %>
      </div>
      <% if @profile.errors[:preferred_mentorship_mode].any? %>
        <p class="mt-2 text-sm text-red-600"><%= @profile.errors[:preferred_mentorship_mode].first %></p>
      <% end %>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <%= f.label :currency, 'Currency', class: 'block text-sm font-medium text-slate-600 mb-2' %>
        <%= f.select :currency, options_for_select([['KES', 'KES'], ['USD', 'USD'], ['GBP', 'GBP']], @profile.currency || 'KES'),
                    { include_blank: false }, class: 'w-full px-4 py-3 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-purple-300 focus:border-purple-500' %>
      </div>
      <div>
        <%= f.label :rate_per_hour, 'Hourly session charge', class: 'block text-sm font-medium text-slate-600 mb-2' %>
        <div class="relative">
          <%= f.number_field :rate_per_hour, min: 0, step: 0.01,
                             class: 'w-full pl-8 pr-3 py-3 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-purple-300 focus:border-purple-500',
                             placeholder: '0.00' %>
          <span class="absolute left-3 top-3 text-slate-500 text-sm">₭</span>
        </div>
        <p class="mt-1 text-sm text-slate-500">Leave blank for pro bono</p>
      </div>
    </div>
    <div>
      <%= f.label :pro_bono, 'Are you willing to mentor pro bono?', class: 'flex items-center space-x-2' %>
      <%= f.check_box :pro_bono, class: 'rounded border-slate-300 text-purple-600 focus:ring-purple-500' %>
      <span class="text-sm text-slate-700">Yes, I'm willing to mentor startups for free</span>
    </div>
    <div>
      <%= f.label :linkedin_url, 'LinkedIn profile or professional website', class: 'block text-sm font-medium text-slate-600 mb-2' %>
      <%= f.url_field :linkedin_url, required: true,
                      class: 'w-full px-4 py-3 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-purple-300 focus:border-purple-500',
                      placeholder: 'https://linkedin.com/in/yourprofile or https://yourwebsite.com' %>
      <% if @profile.errors[:linkedin_url].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @profile.errors[:linkedin_url].first %></p>
      <% end %>
    </div>
    <div>
      <%= f.label :professional_website, 'Additional professional website (optional)', class: 'block text-sm font-medium text-slate-600 mb-2' %>
      <%= f.url_field :professional_website,
                      class: 'w-full px-4 py-3 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-purple-300 focus:border-purple-500',
                      placeholder: 'https://yourportfolio.com or https://yourcompany.com' %>
    </div>
  <% end %>
</div>