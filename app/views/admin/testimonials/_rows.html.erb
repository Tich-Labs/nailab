<%# Rows partial for admin Testimonials %>
<% testimonials.each do |t| %>
  <tr class="border-t" data-testimonial-id="<%= t.id %>" data-testimonial-author="<%= h(t.author_name) %>" data-testimonial-quote="<%= h(t.quote) %>" data-testimonial-role="<%= h(t.author_role) %>" data-testimonial-organization="<%= h(t.organization) %>">
    <td class="p-2 w-32" <% if t.photo_url.present? %>data-testimonial-photo="<%= h(t.photo_url) %>"<% end %>>
      <% if t.photo_url.present? %>
        <img src="<%= t.photo_url %>" alt="<%= h(t.author_name) %>" class="mx-auto max-h-16" />
      <% else %>
        <span class="text-gray-500">No image</span>
      <% end %>
    </td>
    <td class="p-2"><%= t.author_name.presence || 'Untitled' %></td>
    <td class="p-2"><%= truncate(t.quote.to_s, length: 80) %></td>
    <td class="p-2">
      <%= link_to 'Up', '#', class: 'btn btn-ghost' %>
      <%= link_to 'Down', '#', class: 'btn btn-ghost' %>
    </td>
    <td class="p-2">
      <%= form_with url: admin_testimonials_path, method: :patch, local: true do %>
        <%= submit_tag(t.active? ? 'Archive' : 'Activate', class: 'btn btn-sm') %>
      <% end %>
    </td>
    <td class="p-2">
      <div class="flex items-center space-x-2">
        <button type="button" class="btn btn-secondary testimonial-preview-btn" data-id="<%= t.id %>">Preview</button>
        <button type="button" class="btn btn-secondary testimonial-edit-btn" data-id="<%= t.id %}">Edit</button>
        <%= button_to 'Delete', admin_testimonial_path(t), method: :delete, data: { confirm: 'Delete testimonial?' }, class: 'btn btn-danger' %>
      </div>
    </td>
  </tr>
<% end %>
