<% about = AboutPage.first rescue nil %>
<% stored = {} %>
<% if about&.content.present? %>
  <% begin %>
    <% stored = JSON.parse(about.content) rescue {} %>
  <% rescue StandardError %>
    <% stored = {} %>
  <% end %>
<% end %>




<% if stored['our_mission'].present? || stored['our_vision'].present? %>
  <section class="py-20 bg-nailab-purple">
    <div class="max-w-7xl mx-auto px-8 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 gap-12 bg-white p-8 rounded-2xl">
        <div class="rounded-2xl p-12">
          <h3 class="text-3xl font-bold text-gray-900 mb-6"><%= stored['our_mission']&.fetch('title', 'Our Mission') %></h3>
          <p class="text-lg text-gray-700 leading-relaxed"><%= stored['our_mission']&.fetch('description', '') %></p>
        </div>
        <div class="bg rounded-2xl p-12">
          <h3 class="text-3xl font-bold text-gray-900 mb-6"><%= stored['our_vision']&.fetch('title', 'Our Vision') %></h3>
          <p class="text-lg text-gray-700 leading-relaxed"><%= stored['our_vision']&.fetch('description', '') %></p>
        </div>
      </div>
    </div>
  </section>
<% end %>

<% if stored['what_drives_us'].is_a?(Hash) && stored['what_drives_us']['cards'].is_a?(Array) %>
  <section class="py-20 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
          <%= stored['what_drives_us']['title'] || 'What Drives Us' %>
        </h2>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        <% icon_svgs = {
          "Entrepreneur-First" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',
          "Innovation for Impact" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>',
          "Inclusion" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 21C12 21 7 16.5 7 12a5 5 0 0 1 10 0c0 4.5-5 9-5 9z"/><circle cx="12" cy="12" r="3"/></svg>',
          "Collaboration & Community" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',
          "Integrity" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>',
          "Sustainability" => '<svg class="w-7 h-7 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22C12 22 4 18 4 12V5l8-3 8 3v7c0 6-8 10-8 10z"/></svg>'
        } %>
        <% stored['what_drives_us']['cards'].each do |card| %>
          <div class="bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
            <div class="w-14 h-14 bg-teal-100 rounded-lg flex items-center justify-center mb-6">
              <%= raw(icon_svgs[card['title']] || icon_svgs[card['title'].to_s.split.first] || icon_svgs.values.first) %>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-4"><%= card['title'] %></h3>
            <p class="text-gray-700 leading-relaxed"><%= card['description'] %></p>
          </div>
        <% end %>
      </div>
    </div>
  </section>
<% end %>