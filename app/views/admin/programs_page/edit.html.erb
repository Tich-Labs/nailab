<h1 class="text-2xl font-bold mb-4">Edit Programs Page</h1>

<div class="grid grid-cols-2 gap-8 mb-6">
    <div>
        <div>
        <h3 class="text-lg font-medium mb-1">Editor</h3>
        <div class="mb-4 text-left">
          <%= link_to 'Preview Programs page', programs_path, class: 'btn btn-secondary', target: '_blank', rel: 'noopener' %>
        </div>
        <%= render 'admin/programs_page/partials/edit_programs_page', programs_page: @programs_page, stored: @stored %>
      <div id="structured-editor-host" class="mt-4"></div>
        </div>
    </div>
    <div>
        <div>
        <h3 class="text-lg font-medium mb-16">Preview</h3>
        <div id="programs-page-preview" class="prose max-w-none">
            <%= render 'admin/programs_page/partials/preview_programs_page', programs_page: @programs_page, stored: @stored %>
        </div>
        <div id="structured-live-preview" class="mt-4" style="display:none"></div>
        </div>
        <p class="text-xs text-slate-500 mt-6">Preview shows the current Programs page content. Styling may vary on the live site.</p>
    </div>
</div>

<!-- Current Programs list removed from edit page per request -->

    <p class="text-xs text-slate-500 mt-6">Preview shows the current Programs page content. Styling may vary on the live site.</p>
  </div>
</div>

<script>
  document.addEventListener('turbo:load', function(){
    // simple mirroring for title/content -> preview
    try {
      var titleEl = document.getElementById('editor_programs_title');
      var contentEl = document.getElementById('editor_programs_intro');
      var pTitle = document.getElementById('preview_programs_title');
      var pContent = document.getElementById('preview_programs_intro');
      if(titleEl && pTitle){ titleEl.addEventListener('input', function(e){ pTitle.textContent = e.target.value; }); }
      if(contentEl && pContent){ contentEl.addEventListener('input', function(e){ pContent.innerHTML = e.target.value.replace(/\n/g,'<br/>'); }); }
    } catch(err){ console.error('programs page preview mirror init', err); }
  });
</script>
