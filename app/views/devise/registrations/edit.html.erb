<%= render "devise/shared/auth_card",
           title: "Account settings",
           subtitle: "Update your email or change your password.",
           footer: (capture do %>
  <p class="text-sm text-gray-600">
    Back to
    <%= link_to "Home", root_path, class: "font-medium text-nailab-purple hover:text-nailab-teal" %>
  </p>
<% end) do %>
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    <%= render "devise/shared/error_messages", resource: resource %>
    <div class="space-y-4">
      <div>
        <%= f.label :email, class: "block text-sm font-medium text-gray-700" %>
        <%= f.email_field :email,
                          autofocus: true,
                          autocomplete: "email",
                          class: "mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-nailab-purple focus:ring-2 focus:ring-nailab-purple" %>
      </div>
      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <div class="rounded-md border border-nailab-teal/30 bg-nailab-teal-light px-4 py-3 text-sm text-nailab-purple-dark">
          Currently waiting confirmation for: <span class="font-medium"><%= resource.unconfirmed_email %></span>
        </div>
      <% end %>
      <div>
        <div class="flex items-baseline justify-between gap-2">
          <%= f.label :password, class: "block text-sm font-medium text-gray-700" %>
          <span class="text-xs text-gray-500">Leave blank if you don't want to change it</span>
        </div>
        <%= f.password_field :password,
                             autocomplete: "new-password",
                             class: "mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-nailab-purple focus:ring-2 focus:ring-nailab-purple" %>
        <% if @minimum_password_length %>
          <p class="mt-1 text-xs text-gray-500"><%= @minimum_password_length %> characters minimum</p>
        <% end %>
      </div>
      <div>
        <%= f.label :password_confirmation, class: "block text-sm font-medium text-gray-700" %>
        <%= f.password_field :password_confirmation,
                             autocomplete: "new-password",
                             class: "mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-nailab-purple focus:ring-2 focus:ring-nailab-purple" %>
      </div>
      <div>
        <div class="flex items-baseline justify-between gap-2">
          <%= f.label :current_password, class: "block text-sm font-medium text-gray-700" %>
          <span class="text-xs text-gray-500">Required to confirm changes</span>
        </div>
        <%= f.password_field :current_password,
                             autocomplete: "current-password",
                             class: "mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-nailab-purple focus:ring-2 focus:ring-nailab-purple" %>
      </div>
      <div>
        <%= f.submit "Update",
                     class: "w-full rounded-md bg-nailab-purple px-4 py-2 text-sm font-semibold text-white hover:bg-nailab-purple-dark focus:outline-none focus:ring-2 focus:ring-nailab-purple focus:ring-offset-2" %>
      </div>
    </div>
  <% end %>
  <div class="mt-8 rounded-lg border border-gray-200 bg-gray-50 p-4">
    <h2 class="text-sm font-semibold text-gray-900">Cancel my account</h2>
    <p class="mt-1 text-sm text-gray-600">This action is permanent.</p>
    <div class="mt-3">
      <%= button_to "Cancel my account",
                    registration_path(resource_name),
                    method: :delete,
                    data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" },
                    class: "w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50" %>
    </div>
  </div>
<% end %>
