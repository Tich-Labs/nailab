<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= content_for?(:title) ? yield(:title) : 'Nailab' %></title>
    <meta name="description" content="<%= content_for?(:meta_description) ? yield(:meta_description) : 'Nailab â€” supporting founders with programs, mentorship, and funding across Africa.' %>" />
    <%= yield :head %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css" />
    <%# Preload compiled Tailwind output when present (CI builds into app/assets/builds/). Fall back to application.css if available. %>
    <% css_asset = begin
      if Rails.application.assets && Rails.application.assets.find_asset('builds/tailwind.css')
        'builds/tailwind.css'
      else
        'application.css'
      end
    rescue
      # In production environment with Sprockets manifest, prefer builds/tailwind.css
      'builds/tailwind.css'
    end %>
    <link rel="preload" href="<%= asset_path(css_asset) %>" as="style" onload="this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="<%= asset_path(css_asset) %>" /></noscript>
    <%= javascript_importmap_tags %>
  </head>
  <body class="<%= ['bg-white text-gray-900', (devise_controller? ? 'nailab-devise' : nil)].compact.join(' ') %>">
    <%= render 'shared/public_header' %>
    <%= yield %>
  </div>
  <% unless request.path == new_user_session_path || request.path == new_user_registration_path || request.path == founder_onboarding_path || request.path.start_with?('/founder') %>
    <%= render 'shared/footer' %>
  <% end %>
  <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
</body>
</html>
