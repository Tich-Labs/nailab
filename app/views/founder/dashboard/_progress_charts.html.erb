<div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-8 col-span-1 lg:col-span-2">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-900">Metrics Dashboard</h2>
    <%= link_to "Submit New Update", new_founder_monthly_metric_path, class: "bg-nailab-teal text-white font-bold py-2 px-4 rounded-lg" %>
  </div>
  <% if @latest_metric %>
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="bg-purple-100 rounded-xl p-6 shadow-lg">
        <h3 class="text-sm font-medium text-gray-600">MRR</h3>
        <p class="text-3xl font-bold text-gray-900 mt-1"><%= number_to_currency(@latest_metric.mrr) %></p>
      </div>
      <div class="bg-purple-100 rounded-xl p-6 shadow-lg">
        <h3 class="text-sm font-medium text-gray-600">Runway</h3>
        <p class="text-3xl font-bold mt-1 <%= @latest_metric.runway_in_months < 3 ? 'text-red-600' : 'text-green-600' %>">
          <%= number_with_precision(@latest_metric.runway_in_months, precision: 1) %> months
        </p>
      </div>
      <div class="bg-purple-100 rounded-xl p-6 shadow-lg">
        <h3 class="text-sm font-medium text-gray-600">New Customers</h3>
        <p class="text-3xl font-bold text-gray-900 mt-1"><%= @latest_metric.new_paying_customers %></p>
      </div>
      <div class="bg-purple-100 rounded-xl p-6 shadow-lg">
        <h3 class="text-sm font-medium text-gray-600">Churn</h3>
        <p class="text-3xl font-bold text-gray-900 mt-1"><%= @latest_metric.churned_customers %></p>
      </div>
    </div>
    <div class="space-y-8">
      <div>
        <h3 class="text-lg font-semibold text-gray-900 mb-4">MRR Trend</h3>
        <%= line_chart @monthly_metrics.group_by_period(:month, :period).sum(:mrr), xtitle: "Month", ytitle: "MRR", colors: ["#14B8A6"] %>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Customer Growth</h3>
        <%= line_chart [
              {name: "New Customers", data: @monthly_metrics.group_by_period(:month, :period).sum(:new_paying_customers)},
              {name: "Churned Customers", data: @monthly_metrics.group_by_period(:month, :period).sum(:churned_customers)}
            ], xtitle: "Month", ytitle: "Customers", colors: ["#14B8A6", "#F43F5E"] %>
      </div>
    </div>
  <% else %>
    <div class="text-center py-12">
      <p class="text-gray-600">No monthly metrics submitted yet.</p>
      <p class="text-gray-500 mt-2">Submit your first monthly update to see your dashboard.</p>
    </div>
  <% end %>
</div>
