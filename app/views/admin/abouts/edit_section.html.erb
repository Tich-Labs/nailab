<%# Homepage Sections Editor - separate partials for editor and preview for key sections %>
<h1 class="text-2xl font-bold mb-4">Edit: <%= @section_title %></h1>

<% if ['why_nailab_exists','our_impact','vision_mission'].include?(@section_key) %>
  <div class="grid grid-cols-2 gap-8 mb-6">
    <div>
      <%= render "admin/abouts/sections/#{@section_key}_editor" %>
    </div>
    <div>
      <%= render "admin/abouts/sections/#{@section_key}_preview" %>
      <p class="text-xs text-slate-500 mt-6">Preview shows the current section content. Actual styling may vary on the live About page.</p>
    </div>
  </div>
<% else %>
  <div class="space-y-6 mb-6">
    <div class="bg-white p-4 rounded shadow">
      <%= form_with url: admin_about_section_update_path(section: @section_key), method: :patch, local: true do |form| %>
        <p class="text-sm text-slate-600 mb-4">Update the <%= @section_key.gsub('_', ' ').downcase %> section content.</p>
        <div class="mb-3">
          <%= label_tag 'section_payload[title]', 'Title', class: 'block font-bold text-black' %>
          <%= text_field_tag 'section_payload[title]', @section_content["title"], class: 'w-full form-input admin-form-input' %>
        </div>
        <div class="mb-3">
          <%= label_tag 'section_payload[description]', 'Description', class: 'block font-bold text-black' %>
          <%= text_area_tag 'section_payload[description]', @section_content["description"], rows: 6, class: 'w-full form-input admin-form-input' %>
        </div>
        <div class="flex gap-3">
          <%= form.submit 'Save ' + @section_key.gsub('_', ' ').titleize, class: 'btn btn-primary' %>
          <%= link_to 'Preview live section', about_path(@section_key), class: 'btn btn-secondary' %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
