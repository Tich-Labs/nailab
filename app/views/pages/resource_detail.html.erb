<div class="space-y-12">
  <section class="py-20 bg-gray-100">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6 text-center">
      <p class="text-xs uppercase tracking-[0.5em] text-nailab-teal"><%= @resource.resource_type&.titleize %></p>
      <h1 class="text-4xl lg:text-5xl font-bold text-gray-900"><%= @resource.title %></h1>
      <p class="text-lg text-gray-700">
        <%= @resource.description %>
      </p>
      <p class="text-sm uppercase tracking-[0.4em] text-gray-600">
        <%= @resource.published_at&.strftime('%B %d, %Y') || 'Date TBD' %>
      </p>
      <div class="flex flex-col gap-3 items-center justify-center sm:flex-row sm:justify-center">
        <%# Compute primary CTA to match listing cards (Read/Download/Apply/Attend) %>
        <% rt = @resource.resource_type.to_s.downcase %>
        <% action_map = {
          'blog' => { label: 'Read', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } },
          'article' => { label: 'Read', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } },
          'template' => { label: 'Download', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } },
          'opportunity' => { label: 'Apply', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } },
          'event' => { label: 'Attend', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } }
        } %>
        <% action = action_map.fetch(rt, { label: 'Open original resource', path: ->(r) { r.url.presence || resource_detail_path(r.slug) } }) %>
        <% primary_label = action[:label] %>
        <% primary_path = action[:path].call(@resource) rescue (@resource.url.presence || resource_detail_path(@resource.slug)) %>
        <% if primary_path.present? && primary_path != resource_detail_path(@resource.slug) %>
          <%= link_to primary_label, primary_path, target: '_blank', rel: 'noreferrer', class: 'btn btn-primary rounded-full' %>
        <% end %>
        <%= render partial: 'shared/bookmark_button', locals: { resource: @resource } %>
        <% back_url = if params[:return_to].present? && params[:return_to].include?(founder_resources_path)
          params[:return_to]
        else
          resources_path
        end %>
        <%= link_to 'Back to resources', back_url, class: 'btn rounded bg-nailab-teal border-nailab-teal text-white hover:bg-white hover:border-nailab-teal hover:text-slate-900' %>
      </div>
    </div>
  </section>
  <section class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6">
    <div class="card bg-base-100 border border-base-300 shadow-sm">
      <div class="card-body">
        <h2 class="card-title text-xl">Resource overview</h2>
        <p class="text-base-content/70 leading-relaxed"><%= simple_format(@resource.description) %></p>
        <div class="mt-6 grid gap-4 sm:grid-cols-2">
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-[0.4em] text-base-content/60">Category</p>
            <p class="text-sm font-semibold text-base-content"><%= @resource.resource_type&.titleize %></p>
          </div>
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-[0.4em] text-base-content/60">Published</p>
            <p class="text-sm font-semibold text-base-content"><%= @resource.published_at&.strftime('%B %d, %Y') || 'TBD' %></p>
          </div>
        </div>
      </div>
    </div>
    <% if @related_resources.any? %>
      <div class="card bg-base-100 border border-base-300 shadow-sm">
        <div class="card-body">
          <h3 class="card-title text-lg">More resources</h3>
          <div class="mt-4 space-y-4">
            <% @related_resources.each do |related| %>
              <div class="flex items-center justify-between rounded-2xl bg-base-200 px-4 py-3">
                <div>
                  <p class="text-sm font-semibold text-base-content"><%= link_to related.title, resource_detail_path(related.slug, return_to: params[:return_to]), class: 'link link-hover' %></p>
                  <p class="text-xs uppercase tracking-[0.3em] text-base-content/60"><%= related.resource_type&.titleize %></p>
                </div>
                <span class="text-xs text-base-content/60"><%= related.published_at&.strftime('%b %d, %Y') %></span>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </section>
</div>
