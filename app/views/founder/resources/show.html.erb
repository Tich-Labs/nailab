<%# app/views/founder/resources/show.html.erb %>
<div class="max-w-4xl mx-auto py-8 px-4">
  <div class="bg-white shadow rounded-lg p-6">
    <div class="flex justify-between items-start mb-6">
      <div>
        <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= @resource.title %></h1>
        <p class="text-gray-600"><%= @resource.description %></p>
      </div>
      <div class="flex space-x-2">
        <%= link_to 'Download', download_founder_resource_path(@resource), class: "bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700" %>
        <% if current_user.bookmarks.exists?(resource: @resource) %>
          <%= button_to 'Bookmarked', bookmark_founder_resource_path(@resource), method: :post, disabled: true, class: "bg-green-600 text-white px-4 py-2 rounded-lg cursor-not-allowed" %>
        <% else %>
          <%= button_to 'Bookmark', bookmark_founder_resource_path(@resource), method: :post, class: "bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" %>
        <% end %>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <h3 class="font-medium text-gray-700">Category</h3>
        <p class="text-gray-600 mt-1"><%= @resource.category %></p>
      </div>
      <div>
        <h3 class="font-medium text-gray-700">Type</h3>
        <p class="text-gray-600 mt-1"><%= @resource.file_type %></p>
      </div>
      <div>
        <h3 class="font-medium text-gray-700">Author</h3>
        <p class="text-gray-600 mt-1"><%= @resource.author %></p>
      </div>
      <div>
        <h3 class="font-medium text-gray-700">Published</h3>
        <p class="text-gray-600 mt-1"><%= @resource.created_at.strftime('%B %d, %Y') %></p>
      </div>
    </div>
    <% if @resource.content.present? %>
      <div class="border-t pt-6">
        <h3 class="font-medium text-gray-700 mb-4">Content Preview</h3>
        <div class="prose max-w-none">
          <%= @resource.content.html_safe %>
        </div>
      </div>
    <% end %>
    <!-- Rating Section -->
    <div class="border-t pt-6 mt-6">
      <h3 class="font-medium text-gray-700 mb-4">Rate this Resource</h3>
      <% current_rating = current_user.ratings.find_by(resource: @resource)&.score %>
      <% if current_rating %>
        <p class="text-sm text-gray-600 mb-2">Your current rating: <%= current_rating %> stars</p>
      <% end %>
      <div class="flex space-x-2">
        <% (1..5).each do |rating| %>
          <%= button_to rating, rate_founder_resource_path(@resource, score: rating), method: :post, class: "#{current_rating == rating ? 'bg-yellow-500 text-white' : 'bg-gray-200 text-gray-700'} w-8 h-8 rounded-full hover:bg-yellow-400 flex items-center justify-center text-sm font-medium" %>
        <% end %>
      </div>
    </div>
  </div>
</div>