<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= content_for?(:title) ? yield(:title) : 'Nailab' %></title>
    <meta name="description" content="<%= content_for?(:meta_description) ? yield(:meta_description) : 'Nailab â€” supporting founders with programs, mentorship, and funding across Africa.' %>" />
    <%= yield :head %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css" />
    <%# Prefer the compiled builds/tailwind.css in production (fingerprinted via manifest).
        Fall back to the local builds file or to application.css if needed. %>
    <% css_asset = begin
      if Rails.env.production?
        'builds/tailwind.css'
      elsif File.exist?(Rails.root.join('app', 'assets', 'builds', 'tailwind.css'))
        '/assets/builds/tailwind.css'
      else
        'application.css'
      end
    rescue
      'application.css'
    end %>

    <link rel="preload" href="<%= (asset_path(css_asset) rescue '/assets/builds/tailwind.css') %>" as="style" onload="this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="<%= (asset_path(css_asset) rescue '/assets/builds/tailwind.css') %>" /></noscript>
    <%= javascript_importmap_tags %>
  </head>
  <body class="<%= ['bg-white text-gray-900', (devise_controller? ? 'nailab-devise' : nil)].compact.join(' ') %>">
    <%= render 'shared/public_header' %>
    <%= yield %>
  </div>
  <% unless request.path == new_user_session_path || request.path == new_user_registration_path || request.path == founder_onboarding_path || request.path.start_with?('/founder') %>
    <%= render 'shared/footer' %>
  <% end %>
  <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
</body>
</html>
