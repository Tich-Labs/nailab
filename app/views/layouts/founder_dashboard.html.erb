<!DOCTYPE html>
<html lang="en" data-theme="nailab_founder">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= content_for?(:title) ? yield(:title) : 'Nailab | Founder Dashboard' %></title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application.tailwind", "data-turbo-track": "reload" %>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartkick@4.1.1/dist/chartkick.min.js"></script>
    <script>
      (function() {
        var initChartkick = function() {
          try {
            if (window.Chart && window.Chartkick) {
              if (typeof Chartkick.use === 'function') {
                Chartkick.use(window.Chart);
              }
              window.dispatchEvent(new Event('chartkick:load'));
              return true;
            }
          } catch (e) {
            console.error('Chartkick init error', e);
          }
          return false;
        };

        if (!initChartkick()) {
          window.addEventListener('load', function() { initChartkick(); });
        }
      })();
    </script>
    <%= javascript_importmap_tags %>
  </head>
  <body class="bg-gray-50 text-gray-900" data-theme="nailab_founder">
    <div class="flex min-h-screen">
      <%= render 'shared/founder_sidebar' %>
      <div class="flex-1 ml-0 md:ml-64">
        <main class="p-8">
          <%= render 'shared/top_nav' %>
          <div class="border-b border-gray-200 mb-6"></div>
          <%= yield %>
        </main>
      </div>
    </div>
  </body>
</html>
