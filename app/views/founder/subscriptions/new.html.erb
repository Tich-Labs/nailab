<%# app/views/founder/subscriptions/new.html.erb %>
<div class="max-w-4xl mx-auto py-8 px-4">
  <h1 class="text-3xl font-bold text-gray-900 mb-8">Choose Your Plan</h1>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <%= render 'shared/pricing_grid', pricing_tiers: (@pricing_tiers || []) %>
  </div>

  <% if @selected_tier %>
    <div class="max-w-4xl mx-auto mt-8 px-4 sm:px-6 lg:px-8">
      <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-bold mb-4">Confirm your selection</h3>
        <p class="text-gray-700 mb-4">You selected: <strong><%= @selected_tier[:name] %></strong> â€” <span class="font-semibold"><%= @selected_tier[:price] || @selected_tier[:price_text] || 'Contact us' %></span></p>
        <%= form_with url: founder_subscriptions_path, method: :post, local: true do |f| %>
          <%= hidden_field_tag 'subscription[tier]', @selected_tier[:name] %>
          <div class="mb-4">
            <%= f.label :payment_method, 'Payment method', class: 'block text-sm font-medium text-gray-700 mb-2' %>
            <%= f.select :payment_method, options_for_select([['Card','card'], ['Invoice','invoice']]), {}, class: 'w-full border rounded px-3 py-2' %>
          </div>
          <div class="flex justify-end">
            <%= f.submit 'Confirm and Subscribe', class: 'px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold' %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>