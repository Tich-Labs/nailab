<%# app/views/founder/resources/show.html.erb %>
<div data-theme="nailab_founder" class="min-h-screen bg-base-100 text-base-content">
  <div class="max-w-4xl mx-auto py-8 px-4">
  <div class="bg-base-100 shadow rounded-lg p-6">
    <div class="flex justify-between items-start mb-6">
      <div>
        <h1 class="text-4xl lg:text-5xl font-bold text-primary mb-2"><%= @resource.title %></h1>
        <p class="text-base-content/70"><%= @resource.description %></p>
      </div>
      <div class="flex space-x-2">
        <% rt = @resource.resource_type.to_s.downcase %>
        <% action_map = {
          'blog' => { label: 'Read', path: ->(r) { r.url.presence || founder_resource_path(r) } },
          'article' => { label: 'Read', path: ->(r) { r.url.presence || founder_resource_path(r) } },
          'template' => { label: 'Download', path: ->(r) { r.url.presence || download_founder_resource_path(r) } },
          'opportunity' => { label: 'Apply', path: ->(r) { r.url.presence || founder_resource_path(r) } },
          'event' => { label: 'Attend', path: ->(r) { r.url.presence || founder_resource_path(r) } }
        } %>
        <% action = action_map.fetch(rt, { label: 'Download', path: ->(r) { r.url.presence || download_founder_resource_path(r) } }) %>
        <% primary_label = action[:label] %>
        <% primary_path = action[:path].call(@resource) rescue download_founder_resource_path(@resource) %>
        <%= link_to primary_label, primary_path, class: "btn btn-primary", target: ( @resource.url.present? ? '_blank' : nil ), rel: ( @resource.url.present? ? 'noreferrer' : nil ) %>
        <%= button_to 'Bookmark', bookmark_founder_resource_path(@resource), method: :post, class: "bg-base-200 text-base-content px-4 py-2 rounded-lg hover:bg-base-300" %>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <h3 class="font-medium text-base-content">Category</h3>
        <p class="text-base-content/70 mt-1"><%= @resource.category %></p>
      </div>
      <div>
        <h3 class="font-medium text-base-content">Type</h3>
        <p class="text-base-content/70 mt-1"><%= @resource.file_type %></p>
      </div>
      <div>
        <h3 class="font-medium text-base-content">Author</h3>
        <p class="text-base-content/70 mt-1"><%= @resource.author %></p>
      </div>
      <div>
        <h3 class="font-medium text-base-content">Published</h3>
        <p class="text-base-content/70 mt-1"><%= @resource.created_at.strftime('%B %d, %Y') %></p>
      </div>
    </div>
    <% if @resource.content.present? %>
      <div class="border-t border-base-200 pt-6">
        <h3 class="font-medium text-base-content mb-4">Content Preview</h3>
        <div class="prose max-w-none">
          <%= sanitize(@resource.content) %>
        </div>
      </div>
    <% end %>
    <!-- Rating Section -->
    <div class="border-t border-base-200 pt-6 mt-6">
      <h3 class="font-medium text-base-content mb-4">Rate this Resource</h3>
      <div class="flex space-x-2">
        <% (1..5).each do |rating| %>
          <%= button_to rating, rate_founder_resource_path(@resource, score: rating), method: :post, class: "w-8 h-8 bg-base-200 rounded-full hover:bg-warning flex items-center justify-center text-sm font-medium" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
</div>