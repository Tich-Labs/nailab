<% content_for :title, "Programs" %>
<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>
  <div class="text-center mb-12">
    <h1 class="font-bold text-4xl font-gotham text-nailab-purple-dark mb-4">Our Programs</h1>
    <p class="text-xl text-gray-600 max-w-2xl mx-auto">Discover the programs and initiatives that support African startups and entrepreneurs.</p>
  </div>
  <!-- Category Filter -->
  <div class="flex flex-wrap justify-center gap-2 mb-8">
    <%= link_to "All", programs_path, class: "px-4 py-2 rounded-full #{params[:category].blank? ? 'bg-nailab-teal text-white' : 'bg-gray-200 text-gray-700'} hover:bg-nailab-teal hover:text-white transition-colors" %>
    <% Program.categories.each do |key, value| %>
      <%= link_to key.to_s.humanize, programs_path(category: key), class: "px-4 py-2 rounded-full #{params[:category] == key.to_s ? 'bg-nailab-teal text-white' : 'bg-gray-200 text-gray-700'} hover:bg-nailab-teal hover:text-white transition-colors" %>
    <% end %>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    <% @programs.each do |program| %>
      <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
        <% if program.image.attached? %>
          <%= image_tag program.image.variant(resize_to_fill: [400, 250]), class: "w-full h-48 object-cover", alt: program.title %>
        <% else %>
          <div class="w-full h-48 bg-gradient-to-br from-nailab-purple to-nailab-teal flex items-center justify-center">
            <span class="text-white text-4xl">ðŸš€</span>
          </div>
        <% end %>
        <div class="p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-nailab-teal bg-nailab-teal-light px-2 py-1 rounded-full">
              <%= program.category.humanize %>
            </span>
          </div>
          <h3 class="text-xl font-bold text-nailab-purple-dark mb-2"><%= program.title %></h3>
          <p class="text-gray-600 mb-4"><%= program.summary %></p>
          <div class="flex justify-between items-center">
            <%= link_to "Learn More", program, class: "text-nailab-teal hover:text-nailab-purple font-medium" %>
            <% if program.apply_link.present? %>
              <%= link_to "Apply Now", program.apply_link, target: "_blank", class: "bg-nailab-teal text-white px-4 py-2 rounded-md hover:bg-nailab-purple transition-colors" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <% if @programs.empty? %>
    <div class="text-center py-12">
      <p class="text-gray-500 text-lg">No programs found in this category.</p>
      <%= link_to "View All Programs", programs_path, class: "text-nailab-teal hover:text-nailab-purple font-medium" %>
    </div>
  <% end %>
</div>
